<%- include('./header.ejs') %>

<!-- Page Layout -->
<div class="d-flex">
  <!-- Sidebar -->
  <div class="col-3 text-dark p-3">
    <%- include('./sidebar.ejs') %>
  </div>

  <!-- Main Content -->
  <div class="col-9 p-3" style="overflow-y: scroll; height: 800px;">
    <div class="container-fluid mt-3 bg-light">
      <h2>ðŸ“¬ Subscriber List</h2>

      <% if (subscribers.length > 0) { %>  <!-- âœ… Corrected -->
        <table class="table table-bordered" id="subscriberTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Email</th>
              <th>Subscribed At</th>
            </tr>
          </thead>
          <tbody>
            <% subscribers.forEach((subscriber, index) => { %> <!-- âœ… Corrected -->
              <tr>
                <td><%= index + 1 %></td>
                <td><%= subscriber.email %></td>
                <td><%= subscriber.subscribedAt.toLocaleString() %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      <% } else { %>
        <p>No subscribers found.</p>
      <% } %>
    </div>
  </div>
</div>

<!-- Scripts -->
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>

<!-- Initialize DataTable -->
<script>
  $(document).ready(function () {
    $('#subscriberTable').DataTable(); // âœ… Fixed typo: DataTable() not subscriber()
  });
</script>
